<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Игра: Угадай столицу</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            text-align: center;
            padding: 20px;
        }
        h1 {
            color: #444;
        }
        .container {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            display: inline-block;
        }
        input {
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            padding: 10px 20px;
            background-color: #28a745;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #218838;
        }
        .result {
            margin-top: 20px;
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Игра: Угадай столицу</h1>
        <p>Введите столицу страны. Для завершения игры введите "хватит играть".</p>
        <div id="game">
            <p id="question"></p>
            <input type="text" id="answer" placeholder="Введите столицу">
            <button onclick="checkAnswer()">Ответить</button>
            <button onclick="skip()">Пропуск</button>
            <div class="result" id="result"></div>
            <div class="result" id="score"></div>
        </div>
    </div>

    <script>
        // Словарь стран и их столиц (с несколькими вариантами ответа)
        const capitals = {
    "Афганистан": "Кабул",
    "Албания": "Тирана",
    "Алжир": "Алжир",
    "Андорра": ["Андорра-ла-Велья","Андорра"],
    "Ангола": "Луанда",
    "Антигуа и Барбуда": ["Сент-Джонс","Джонс"],
    "Аргентина": ["Буэнос-Айрес","Буэнос"],
    "Армения": "Ереван",
    "Австралия": "Канберра",
    "Австрия": "Вена",
    "Азербайджан": "Баку",
    "Багамы": "Нассау",
    "Бахрейн": "Манама",
    "Бангладеш": "Дакка",
    "Барбадос": "Бриджтаун",
    "Беларусь": "Минск",
    "Бельгия": "Брюссель",
    "Белиз": "Бельмопан",
    "Бенин": "Порто-Ново",
    "Бутан": "Тхимпху",
    "Боливия": "Сукре",
    "Босния и Герцеговина": "Сараево",
    "Ботсвана": "Габороне",
    "Бразилия": "Бразилиа",
    "Бруней": ["Бандар-Сери-Бегаван","Сери-Бегаван","Бандар-Бегаван"],
    "Болгария": "София",
    "Буркина-Фасо": "Уагадугу",
    "Бурунди": "Бужумбура",
    "Камбоджа": "Пномпень",
    "Камерун": "Яунде",
    "Канада": "Оттава",
    "Кабо-Верде": "Прая",
    "Центральноафриканская Республика": "Банги",
    "Чад": "Нджамена",
    "Чили": "Сантьяго",
    "Китай": "Пекин",
    "Колумбия": "Богота",
    "Коморы": "Морони",
    "Конго (Демократическая Республика)": "Киншаса",
    "Конго (Республика)": "Браззавиль",
    "Коста-Рика": ["Сан-Хосе","Хосе"],
    "Хорватия": "Загреб",
    "Куба": "Гавана",
    "Кипр": "Никосия",
    "Чехия": "Прага",
    "Дания": "Копенгаген",
    "Джибути": "Джибути",
    "Доминика": "Розо",
    "Доминиканская Республика": "Санто-Доминго",
    "Восточный Тимор": "Дили",
    "Эквадор": "Кито",
    "Египет": "Каир",
    "Сальвадор": ["Сан-Сальвадор","Сальвадор"],
    "Экваториальная Гвинея": "Малабо",
    "Эритрея": "Асмэра",
    "Эстония": "Таллин",
    "Эсватини": "Мбабане",
    "Эфиопия": "Аддис-Абеба",
    "Фиджи": "Сува",
    "Финляндия": "Хельсинки",
    "Франция": "Париж",
    "Габон": "Либревиль",
    "Гамбия": "Банжул",
    "Грузия": "Тбилиси",
    "Германия": "Берлин",
    "Гана": "Аккра",
    "Греция": "Афины",
    "Гренада": ["Сент-Джорджес","Джорджес"],
    "Гватемала": "Гватемала",
    "Гвинея": "Конакри",
    "Гвинея-Бисау": "Бисау",
    "Гайана": "Джорджтаун",
    "Гаити": ["Порт-о-Пренс","Пренс"],
    "Гондурас": "Тегусигальпа",
    "Венгрия": "Будапешт",
    "Исландия": "Рейкьявик",
    "Индия": ["Нью-Дели","Дели"],
    "Индонезия": "Джакарта",
    "Иран": "Тегеран",
    "Ирак": "Багдад",
    "Ирландия": "Дублин",
    "Израиль": "Иерусалим",
    "Италия": "Рим",
    "Ямайка": "Кингстон",
    "Япония": "Токио",
    "Иордания": "Амман",
    "Казахстан": "Астана",
    "Кения": "Найроби",
    "Кирибати": "Южная Тарава",
    "Корея (Северная)": "Пхеньян",
    "Корея (Южная)": "Сеул",
    "Косово": "Приштина",
    "Кувейт": ["Эль-Кувейт","Кувейт"],
    "Кыргызстан": "Бишкек",
    "Лаос": "Вьентьян",
    "Латвия": "Рига",
    "Ливан": "Бейрут",
    "Лесото": "Масеру",
    "Либерия": "Монровия",
    "Ливия": "Триполи",
    "Лихтенштейн": "Вадуц",
    "Литва": "Вильнюс",
    "Люксембург": "Люксембург",
    "Мадагаскар": "Антананариву",
    "Малави": "Лилонгве",
    "Малайзия": "Куала-Лумпур",
    "Мальдивы": "Мале",
    "Мали": "Бамако",
    "Мальта": "Валлетта",
    "Маршалловы Острова": "Маджуро",
    "Мавритания": "Нуакшот",
    "Маврикий": ["Порт-Луи","Луи"],
    "Мексика": "Мехико",
    "Микронезия": "Паликир",
    "Молдова": "Кишинёв",
    "Монако": "Монако",
    "Монголия": "Улан-Батор",
    "Черногория": "Подгорица",
    "Марокко": "Рабат",
    "Мозамбик": "Мапуту",
    "Мьянма": "Нейпьидо",
    "Намибия": "Виндхук",
    "Науру": "Ярен",
    "Непал": "Катманду",
    "Нидерланды": "Амстердам",
    "Новая Зеландия": "Веллингтон",
    "Никарагуа": "Манагуа",
    "Нигер": "Ниамей",
    "Нигерия": "Абуджа",
    "Северная Македония": "Скопье",
    "Норвегия": "Осло",
    "Оман": "Маскат",
    "Пакистан": "Исламабад",
    "Палау": "Нгерулмуд",
    "Панама": "Панама",
    "Папуа — Новая Гвинея": ["Порт-Морсби","Морсби"],
    "Парагвай": "Асунсьон",
    "Перу": "Лима",
    "Филиппины": "Манила",
    "Польша": "Варшава",
    "Португалия": "Лиссабон",
    "Катар": "Доха",
    "Румыния": "Бухарест",
    "Россия": "Москва",
    "Руанда": "Кигали",
    "Сент-Китс и Невис": "Бастер",
    "Сент-Люсия": "Кастри",
    "Сент-Винсент и Гренадины": "Кингстаун",
    "Самоа": "Апиа",
    "Сан-Марино": "Сан-Марино",
    "Сан-Томе и Принсипи": "Сан-Томе",
    "Саудовская Аравия": "Эр-Рияд",
    "Сенегал": "Дакар",
    "Сербия": "Белград",
    "Сейшелы": "Виктория",
    "Сьерра-Леоне": "Фритаун",
    "Сингапур": "Сингапур",
    "Словакия": "Братислава",
    "Словения": "Любляна",
    "Соломоновы Острова": "Хониара",
    "Сомали": "Могадишо",
    "Южная Африка": "Претория",
    "Южный Судан": "Джуба",
    "Испания": "Мадрид",
    "Шри-Ланка": ["Шри-Джаяварденепура-Котте","Шри-Котте"],
    "Судан": "Хартум",
    "Суринам": "Парамарибо",
    "Швеция": "Стокгольм",
    "Швейцария": "Берн",
    "Сирия": "Дамаск",
    "Таджикистан": "Душанбе",
    "Танзания": "Додома",
    "Таиланд": "Бангкок",
    "Того": "Ломе",
    "Тонга": "Нукуалофа",
    "Тринидад и Тобаго": ["Порт-оф-Спейн","Спейн"],
    "Тунис": "Тунис",
    "Турция": "Анкара",
    "Туркменистан": "Ашхабад",
    "Тувалу": "Фунафути",
    "Уганда": "Кампала",
    "Украина": "Киев",
    "ОАЭ": "Абу-Даби",
    "Великобритания": "Лондон",
    "США": "Вашингтон",
    "Уругвай": "Монтевидео",
    "Узбекистан": "Ташкент",
    "Вануату": "Порт-Вила",
    "Ватикан": "Ватикан",
    "Венесуэла": "Каракас",
    "Вьетнам": "Ханой",
    "Йемен": "Сана",
    "Замбия": "Лусака",
    "Зимбабве": "Хараре"
    };

        let enteredCities = [];
        let points = 0;
        let countries = Object.keys(capitals);
        let currentCountry = getRandomCountry();

        // Функция для очистки строки от пробелов, дефисов и приведения к нижнему регистру
        function cleanString(str) {
            return str.toLowerCase().replace(/[\s-]/g, ''); // Убираем пробелы и дефисы
        }

        // Функция для получения случайной страны
        function getRandomCountry() {
            let availableCountries = countries.filter(country => !enteredCities.includes(country));
            if (availableCountries.length === 0) {
                alert("Все страны пройдены! Ваш итоговый счет: " + points + "/196");
                resetGame();
                return null;
            }
            return availableCountries[Math.floor(Math.random() * availableCountries.length)];
        }

        // Функция для проверки ответа
        function checkAnswer() {
            let userAnswer = cleanString(document.getElementById("answer").value.trim()); // Очищаем ответ
            if (userAnswer === "хватитиграть") { // Убираем пробелы и дефисы для завершения игры
                endGame();
                return;
            }
            if (userAnswer === "") {
                alert("Пожалуйста, введите ответ.");
                return;
            }

            // Получаем правильные ответы (массив или строку)
            let correctAnswers = capitals[currentCountry];
            if (!Array.isArray(correctAnswers)) {
                correctAnswers = [correctAnswers]; // Если ответ один, преобразуем в массив
            }

            // Проверяем, совпадает ли ответ пользователя с любым из вариантов
            let isCorrect = correctAnswers.some(answer => cleanString(answer) === userAnswer);

            if (isCorrect) {
                points++;
                document.getElementById("result").innerText = "Правильно! Это действительно столица.";
            } else {
                document.getElementById("result").innerText = `Неправильно. Столицей ${currentCountry} является ${correctAnswers.join(" или ")}.`;
            }
            enteredCities.push(currentCountry);
            document.getElementById("score").innerText = `Ваш счет: ${points}/196`;
            nextQuestion();
        }

        // Функция для пропуска вопроса
        function skip() {
            let correctAnswers = capitals[currentCountry];
            if (!Array.isArray(correctAnswers)) {
                correctAnswers = [correctAnswers]; // Если ответ один, преобразуем в массив
            }
            document.getElementById("result").innerText = `Пропущено. Правильный ответ: ${correctAnswers.join(" или ")}.`;
            enteredCities.push(currentCountry);
            nextQuestion();
        }

        // Функция для перехода к следующему вопросу
        function nextQuestion() {
            currentCountry = getRandomCountry();
            if (currentCountry) {
                document.getElementById("question").innerText = `Укажите столицу ${currentCountry}:`;
                document.getElementById("answer").value = "";
            }
        }

        // Функция для завершения игры
        function endGame() {
            alert("Игра завершена. Ваш итоговый счет: " + points + "/196" );
            resetGame();
        }

        // Функция для сброса игры
        function resetGame() {
            enteredCities = [];
            points = 0;
            currentCountry = getRandomCountry();
            document.getElementById("question").innerText = `Укажите столицу ${currentCountry}:`;
            document.getElementById("result").innerText = "";
            document.getElementById("score").innerText = "";
            document.getElementById("answer").value = "";
        }

        // Инициализация игры
        document.getElementById("question").innerText = `Укажите столицу ${currentCountry}:`;
    </script>
</body>
</html>